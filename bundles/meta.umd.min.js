(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("lodash"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/observable/of")):"function"==typeof define&&define.amd?define(["@angular/core","lodash","@angular/platform-browser","rxjs/Observable","rxjs/add/observable/fromPromise","rxjs/add/observable/of"],t):"object"==typeof exports?exports.meta=t(require("@angular/core"),require("lodash"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/observable/of")):e.meta=t(e["@angular/core"],e.lodash,e["@angular/platform-browser"],e["rxjs/Observable"],e["rxjs/add/observable/fromPromise"],e["rxjs/add/observable/of"])})(this,function(e,t,a,r,i,n){return function(e){function t(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=7)}([function(e,t,a){"use strict";var r=a(2);a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n});var i=function(){function e(){}return e}(),n=function(){function e(e){void 0===e&&(e={pageTitlePositioning:r.a.PrependPageTitle,defaults:{}}),this.settings=e}return e.prototype.getSettings=function(){return this.settings},e}()},function(e,t,a){"use strict";var r=a(3),i=a(4),n=(a.n(i),a(9)),o=(a.n(n),a(10)),s=(a.n(o),a(12)),l=(a.n(s),a(11)),c=(a.n(l),a(6)),u=(a.n(c),a(2)),f=a(0),p=a(8);a.d(t,"a",function(){return g});var g=function(){function e(e,t,a){this.loader=e,this.title=t,this.meta=a,this.metaSettings=e.getSettings(),this.isMetaTagSet={}}return e.prototype.setTitle=function(e,t){var a=this;void 0===t&&(t=!1),(e?this.callback(e):o.Observable.of("")).subscribe(function(e){var r="";e?!t&&a.metaSettings.pageTitleSeparator&&a.metaSettings.applicationName?a.callback(a.metaSettings.applicationName).subscribe(function(t){r=t?a.getTitleWithPositioning(e,t):e,a.updateTitle(r)}):a.updateTitle(e):(c.has(a.metaSettings,"defaults.title")?a.callback(a.metaSettings.defaults.title):o.Observable.of("")).subscribe(function(e){!t&&a.metaSettings.pageTitleSeparator&&a.metaSettings.applicationName?a.callback(a.metaSettings.applicationName).subscribe(function(t){r=t?a.getTitleWithPositioning(e,t):e,a.updateTitle(r)}):a.updateTitle(e)})})},e.prototype.setTag=function(e,t){var a=this;if("title"===e)throw new Error("Attempt to set "+e+" through 'setTag': 'title' is a reserved tag name. Please use 'MetaService.setTitle' instead.");t=t||c.get(this.metaSettings,"defaults."+e,""),("og:locale"!==e&&"og:locale:alternate"!==e?this.callback(t):o.Observable.of(t)).subscribe(function(t){a.updateTag(e,t)})},e.prototype.update=function(e,t){var a=this;if(t){if(t.disabled)return void this.update(e);this.setTitle(t.title,t.override),Object.keys(t).forEach(function(e){var r=t[e];if("title"!==e&&"override"!==e){if("og:locale"===e)r=r.replace(/-/g,"_");else if("og:locale:alternate"===e){var i=t["og:locale"];return void a.updateLocales(i,t[e])}a.setTag(e,r)}})}else{var r=c.get(this.metaSettings,"defaults.title","")||this.metaSettings.applicationName;this.setTitle(r,!0)}Object.keys(c.get(this.metaSettings,"defaults",{})).forEach(function(e){var r=a.metaSettings.defaults[e];if(!(t&&(e in a.isMetaTagSet||e in t)||"title"===e||"override"===e)){if("og:locale"===e)r=r.replace(/-/g,"_");else if("og:locale:alternate"===e){var i=c.get(t,"og:locale",void 0);return void a.updateLocales(i,r)}a.setTag(e,r)}});var i=((this.metaSettings.applicationUrl||"/")+e).replace(/(https?:\/\/)|(\/)+/g,"$1$2").replace(/\/$/g,"");this.setTag("og:url",i||"/")},e.prototype.callback=function(e){if(this.metaSettings.callback){var t=this.metaSettings.callback(e);return a.i(p.a)(t)?t:a.i(p.b)(t)?o.Observable.fromPromise(t):o.Observable.of(t)}return o.Observable.of(e)},e.prototype.getTitleWithPositioning=function(e,t){switch(this.metaSettings.pageTitlePositioning){case u.a.AppendPageTitle:return t+this.metaSettings.pageTitleSeparator+e;case u.a.PrependPageTitle:return e+this.metaSettings.pageTitleSeparator+t;default:throw new Error("Invalid pageTitlePositioning specified ["+this.metaSettings.pageTitlePositioning+"]!")}},e.prototype.updateTitle=function(e){this.title.setTitle(e),this.meta.updateTag({property:"og:title",content:e})},e.prototype.updateLocales=function(e,t){var a=this;(e=e||c.get(this.metaSettings,'defaults["og:locale"]',""))&&this.metaSettings.defaults&&(this.metaSettings.defaults["og:locale"]=e.replace(/_/g,"-")),this.meta.getTags('property="og:locale:alternate"').forEach(function(e){a.meta.removeTagElement(e)}),e&&t&&t.split(",").forEach(function(t){e.replace(/-/g,"_")!==t.replace(/-/g,"_")&&a.meta.addTag({property:"og:locale:alternate",content:t.replace(/-/g,"_")})})},e.prototype.updateTag=function(e,t){if(0===e.lastIndexOf("og:",0)?this.meta.updateTag({property:e,content:"og:locale"===e?t.replace(/-/g,"_"):t}):this.meta.updateTag({name:e,content:t}),this.isMetaTagSet[e]=!0,"description"===e)this.meta.updateTag({property:"og:description",content:t});else if("author"===e)this.meta.updateTag({property:"og:author",content:t});else if("publisher"===e)this.meta.updateTag({property:"og:publisher",content:t});else if("og:locale"===e){var a=c.get(this.metaSettings,'defaults["og:locale:alternate"]',"");this.updateLocales(t,a),this.isMetaTagSet["og:locale:alternate"]=!0}else if("og:locale:alternate"===e){var r=this.meta.getTag('property="og:locale"').content;this.updateLocales(r,t),this.isMetaTagSet["og:locale"]=!0}},e}();g=r.a([a.i(i.Injectable)(),r.c("design:paramtypes",[f.a,n.Title,n.Meta])],g)},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r;(function(e){e[e.AppendPageTitle=0]="AppendPageTitle",e[e.PrependPageTitle=10]="PrependPageTitle"})(r||(r={}))},function(e,t,a){"use strict";function r(e,t,a,r){var i,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(n<3?i(o):n>3?i(t,a,o):i(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o}function i(e,t){return function(a,r){t(a,r,e)}}function n(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}t.a=r,t.b=i,t.c=n;Object.setPrototypeOf||Array,Object.assign},function(t,a){t.exports=e},function(e,t,a){"use strict";var r=a(3),i=a(4),n=(a.n(i),a(6)),o=(a.n(n),a(1));a.d(t,"a",function(){return s});var s=function(){function e(e){this.meta=e}return e.prototype.canActivate=function(e,t){var a=t.url,r=n.get(e.data,"meta",void 0);return this.meta.update(a,r),!0},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e}();s=r.a([a.i(i.Injectable)(),r.c("design:paramtypes",[o.a])],s)},function(e,a){e.exports=t},function(e,t,a){"use strict";function r(){return new s.b}Object.defineProperty(t,"__esModule",{value:!0});var i=a(3),n=a(4),o=(a.n(n),a(5)),s=a(0),l=a(1),c=a(2);a.d(t,"PageTitlePositioning",function(){return c.a}),a.d(t,"MetaGuard",function(){return o.a}),a.d(t,"MetaLoader",function(){return s.a}),a.d(t,"MetaStaticLoader",function(){return s.b}),a.d(t,"MetaService",function(){return l.a}),t.metaFactory=r,a.d(t,"MetaModule",function(){return u});var u=f=function(){function e(e){if(e)throw new Error("MetaModule already loaded; import in root module only.")}return e.forRoot=function(e){return void 0===e&&(e={provide:s.a,useFactory:r}),{ngModule:f,providers:[e,o.a,l.a]}},e}();u=f=i.a([a.i(n.NgModule)(),i.b(0,a.i(n.Optional)()),i.b(0,a.i(n.SkipSelf)()),i.c("design:paramtypes",[u])],u);var f},function(e,t,a){"use strict";function r(e){return!!e&&"function"==typeof e.then}function i(e){return!!e&&"function"==typeof e.subscribe}t.b=r,t.a=i},function(e,t){e.exports=a},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=n}])});